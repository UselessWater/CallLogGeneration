# 更新日志

## v2.2.6 (2025-08-25)

### 修复
- 修复了`setFieldWithFallback`方法中字段支持检查的重复处理问题
- 统一使用`DeviceFieldConfig.isFieldSupported`方法进行字段支持检查
- 消除了字段支持检查逻辑的不一致性

## v2.2.5 (2025-08-25)

### 修复
- 修复了`setFieldWithFallback`方法中对`MISSED_REASON_FIELD`类型字段处理不完整的问题
- 补充了对拒接原因字段的完整支持逻辑

## v2.2.4 (2025-08-25)

### 修复
- 修复了字段降级逻辑中的关键错误
- 修正了`setFieldWithFallback`方法中的降级字段判断逻辑
- 完善了字段类型系统，增加了`MISSED_REASON_FIELD`类型
- 优化了设备字段配置验证逻辑

## v2.2.3 (2025-08-25)

### 重大改进
- 实现了基于厂商和机型的静态字段配置机制
- 采用预定义各厂商机型字段配置的方式，确保最大兼容性
- 移除了不准确的运行时字段探测机制
- 通过设备配置验证确保字段使用准确性

### 修复
- 彻底解决了各厂商设备通话记录字段兼容性问题
- 确保不会在某个机型上使用到另外一个机型的字段
- 优化了SIM卡字段和响铃时长字段的厂商适配逻辑

## v2.2.2 (2025-08-25)

### 修复
- 修复了 `menuAnchor()` 方法的弃用警告，使用新的 `menuAnchor(MenuAnchorType.PrimaryNotEditable, true)` 语法
- 修复了 `versionCode` 字段的弃用警告，使用新的 `longVersionCode` API 并添加了向后兼容性处理
- 修复了版本号解析中的 `coerceAtMost` 函数使用问题，改用 `take` 函数
- 优化了版本号解析逻辑，更好地处理复杂的版本号格式，包括对 alpha、beta、rc 等预发布版本的支持
- 改进了更新检查逻辑，在版本比较失败时默认提示更新
- 增强了 APK 下载和安装过程中的资源管理，确保网络连接和文件流正确关闭
- 增大了下载缓冲区大小以提高下载速度
- 添加了更完善的异常处理和日志记录

### 兼容性改进
- 增强了对不同厂商设备的兼容性支持，包括 OPPO、荣耀、小米、三星等
- 扩展了厂商特定字段的支持，增加了更多设备适配字段
- 优化了字段级降级机制，提高在不同设备上的稳定性

## v2.1.0 (2025-08-23)

### 新特性
- 全新的现代化 Material Design 3 界面
- 改进了通话类型支持，增加了拒接来电类型
- 增强了响铃时长设置功能，支持未接来电和拒接来电的响铃时长自定义
- 添加了高级设置面板，提供更多自定义选项
- 实现了智能 SIM 卡适配方案，支持 vivo、小米、OPPO、三星、荣耀等厂商设备
- 采用字段级降级机制，确保在各种 Android 设备上的兼容性

### 技术改进
- 使用 Jetpack Compose 重构 UI 界面
- 更新到最新的 Kotlin 和 Compose 版本
- 改进了权限管理流程
- 优化了时间处理逻辑，使用 ThreeTenABP 库提供更好的日期时间支持
- 增强了错误处理和日志记录
- 实现了更智能的更新检查机制

## v1.0.0 (2024-05-20)

### 初始版本
- 基础通话记录生成功能
- 支持批量生成通话记录
- 多 SIM 卡支持
- 自定义时间设置
- Material Design 界面